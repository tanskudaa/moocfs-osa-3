{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","then","response","data","newObject","post","id","remObject","catch","delete","newNumber","oldObject","find","a","updatedObject","number","put","Notice","message","className","Error","FilterForm","keyword","keywordSetter","value","onChange","e","target","NewPersonForm","newName","newNameSetter","newNumberSetter","addPerson","onSubmit","type","FilteredPersons","list","deletePerson","filter","name","includes","sort","b","toLowerCase","map","key","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setKeyword","noticeMessage","setNoticeMessage","errorMessage","setErrorMessage","useEffect","doesntExist","personService","concat","preventDefault","personIndex","indexOf","confirmUpdate","window","confirm","newPersons","setTimeout","error","console","log","person","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.44156d0a.chunk.js","sourcesContent":["import axios from 'axios'\n\n\nconst baseUrl = '/api/persons'\n\n\nconst getAll = () => {\n  return (\n    axios\n      .get(baseUrl)\n      .then(response => response.data)\n  )\n}\n\nconst create = (newObject) => {\n  return (\n    axios\n      .post(baseUrl, newObject)\n      .then(response => response.data)\n  )\n}\n\nconst remove = (id) => {\n  const remObject = axios\n    .get(`${baseUrl}/${id}`)\n    .then(response => response.data)\n    .catch(() => {\n      // console.log(`tried remove, but no object on id ${id}`)\n      return 1\n    })\n\n  remObject.then(response => {\n    if (response !== 1) {\n      axios.delete(`${baseUrl}/${id}`)\n      // console.log(`succesfully removed id ${id}`)\n    }\n  })\n\n  return remObject\n}\n\nconst update = (id, newNumber) => {\n  // console.log(`updating id ${id}`)\n\n  return getAll()\n    .then(response => {\n      const oldObject = response.find(a => a.id === id)\n      // console.log(oldObject)\n      const updatedObject = { ...oldObject, number: newNumber}\n      // console.log(updatedObject)\n\n      axios\n        .put(`${baseUrl}/${id}`, updatedObject)\n\n      return updatedObject\n    })\n}\n\n\nexport default { getAll, create, remove, update }\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\n\nconst Notice = ({ message }) => {\n  if (message !== \"\" && message !== null && typeof message !== \"undefined\" ) {\n    return (\n      <div className=\"notice\">\n        {message}\n      </div>\n    )\n  }\n\n  else {\n    return null\n  }\n}\n\nconst Error = ({ message }) => {\n  if (message !== \"\" && message !== null && typeof message !== \"undefined\" ) {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  else {\n    return null\n  }\n}\n\nconst FilterForm = ({ keyword, keywordSetter }) => {\n  return (\n    <form>\n      <div>\n        filter shown with\n        <input\n          value={keyword}\n          onChange={(e) => keywordSetter(e.target.value)}\n        />\n      </div>\n    </form>\n  )\n}\n\nconst NewPersonForm = (\n    {\n      newName,\n      newNameSetter,\n      newNumber,\n      newNumberSetter,\n      addPerson\n    }) => {\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name:\n        <input\n          value={newName}\n          onChange={(e) => newNameSetter(e.target.value)}\n        />\n      </div>\n      <div>\n        number:\n        <input\n          value={newNumber}\n          onChange={(e) => newNumberSetter(e.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst FilteredPersons = ({ list, keyword, deletePerson }) => {\n  const filtered = list.filter(a => a.name.includes(keyword))\n  const sorted = filtered.sort((a, b) => {\n    const nameA = a.name.toLowerCase()\n    const nameB = b.name.toLowerCase()\n    return (nameA > nameB) ? 1 : -1\n  })\n\n  return (\n    sorted.map(a => (\n      <div key={a.id}>\n        {a.name} {a.number}\n        <button onClick={() => deletePerson(a)}>delete</button>\n      </div>\n    ))\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ keyword, setKeyword ] = useState('')\n  const [ noticeMessage, setNoticeMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n\n  useEffect(() => {\n    const doesntExist = {\n      id: -1,\n      name: \"doesn't exist\",\n      number: \"\"\n    }\n\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.concat(doesntExist))\n      })\n  }, [])\n\n  const addPerson = (e) => {\n    e.preventDefault()\n\n    const personIndex = persons.map(a => a.name).indexOf(newName)\n    let confirmUpdate = null\n    if (personIndex !== -1) {\n      confirmUpdate = window.confirm(`${newName} is already added. Update number?`)\n    }\n\n    if (confirmUpdate === true) {\n      personService\n        .update(persons[personIndex].id, newNumber)\n        .then(response => {\n          const newPersons = (persons\n              .filter(a => a.id !== response.id)\n              .concat(response))\n          setPersons(newPersons)\n          setNoticeMessage(`Updated ${newName}`)\n          setTimeout(() => {setNoticeMessage(null)}, 3000)\n        })\n    }\n\n    else if (confirmUpdate === null) {\n      const newPerson = { name: newName, number: newNumber }\n      personService\n        .create(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setNoticeMessage(`Added ${newName}`)\n          setTimeout(() => {setNoticeMessage(null)}, 3000)\n        })\n        .catch(error => {\n          console.log(error)\n          console.log(error.response)\n          setErrorMessage(error.response.data)\n          setTimeout(() => {setErrorMessage(null)}, 3000)\n        })\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Really delete ${person.name}?`)) {\n      personService\n        .remove(person.id)\n        .then(response => {\n          if (response === 1) {\n            setPersons(persons.filter(a => a.id !== person.id))\n            setErrorMessage(`${person.name} has already been removed from server`)\n            setTimeout(() => {setErrorMessage(null)}, 3000)\n          }\n          else {\n            setPersons(persons.filter(a => a.id !== response.id))\n            setNoticeMessage(`Removed ${person.name}`)\n            setTimeout(() => {setNoticeMessage(null)}, 3000)\n          }\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <FilterForm\n        keyword={keyword}\n        keywordSetter={setKeyword}\n      />\n\n      <Notice message={noticeMessage} />\n      <Error message={errorMessage} />\n\n      <h2>Add new</h2>\n      <NewPersonForm\n        newName={newName}\n        newNameSetter={setNewName}\n        newNumber={newNumber}\n        newNumberSetter={setNewNumber}\n        addPerson={addPerson}\n      />\n\n      <h2>Numbers</h2>\n      <FilteredPersons\n        list={persons}\n        keyword={keyword}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}