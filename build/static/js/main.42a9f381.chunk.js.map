{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","getAll","axios","get","then","response","data","newObject","post","id","remObject","catch","console","log","delete","newNumber","oldObject","find","a","updatedObject","number","put","Notice","message","className","Error","FilterForm","keyword","keywordSetter","value","onChange","e","target","NewPersonForm","newName","newNameSetter","newNumberSetter","addPerson","onSubmit","type","FilteredPersons","list","deletePerson","filter","name","includes","map","key","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setKeyword","noticeMessage","setNoticeMessage","errorMessage","setErrorMessage","useEffect","personService","preventDefault","personIndex","indexOf","window","confirm","newPersons","concat","setTimeout","person","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.42a9f381.chunk.js","sourcesContent":["import axios from 'axios'\n\n\nconst baseUrl = '/api/persons'\n\n\nconst getAll = () => {\n  return (\n    axios\n      .get(baseUrl)\n      .then(response => response.data)\n  )\n}\n\nconst create = (newObject) => {\n  return (\n    axios\n      .post(baseUrl, newObject)\n      .then(response => response.data)\n  )\n}\n\nconst remove = (id) => {\n  const remObject = axios\n    .get(`${baseUrl}/${id}`)\n    .then(response => response.data)\n    .catch(() => {\n      console.log(`tried remove, but no object on id ${id}`)\n      return 1\n    })\n\n  remObject.then(response => {\n    if (response !== 1) {\n      axios.delete(`${baseUrl}/${id}`)\n      console.log(`succesfully removed id ${id}`)\n    }\n  })\n\n  return remObject\n}\n\nconst update = (id, newNumber) => {\n  console.log(`updating id ${id}`)\n\n  return getAll()\n    .then(response => {\n      const oldObject = response.find(a => a.id === id)\n      console.log(oldObject)\n\n      const updatedObject = { ...oldObject, number: newNumber}\n      console.log(updatedObject)\n\n      axios\n        .put(`${baseUrl}/${id}`, updatedObject)\n\n      return updatedObject\n    })\n}\n\n\nexport default { getAll, create, remove, update }\n","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\n\nconst Notice = ({ message }) => {\n  if (message !== \"\" && message !== null && typeof message !== \"undefined\" ) {\n    return (\n      <div className=\"notice\">\n        {message}\n      </div>\n    )\n  }\n\n  else {\n    return null\n  }\n}\n\nconst Error = ({ message }) => {\n  if (message !== \"\" && message !== null && typeof message !== \"undefined\" ) {\n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n  }\n\n  else {\n    return null\n  }\n}\n\nconst FilterForm = ({ keyword, keywordSetter }) => {\n  return (\n    <form>\n      <div>\n        filter shown with\n        <input\n          value={keyword}\n          onChange={(e) => keywordSetter(e.target.value)}\n        />\n      </div>\n    </form>\n  )\n}\n\nconst NewPersonForm = (\n    {\n      newName,\n      newNameSetter,\n      newNumber,\n      newNumberSetter,\n      addPerson\n    }) => {\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name:\n        <input\n          value={newName}\n          onChange={(e) => newNameSetter(e.target.value)}\n        />\n      </div>\n      <div>\n        number:\n        <input\n          value={newNumber}\n          onChange={(e) => newNumberSetter(e.target.value)}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst FilteredPersons = ({ list, keyword, deletePerson }) => {\n  const filtered = list.filter(a => a.name.includes(keyword))\n\n  return (\n    filtered.map(a => (\n      <div key={a.id}>\n        {a.name} {a.number}\n        <button onClick={() => deletePerson(a)}>delete</button>\n      </div>\n    ))\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ keyword, setKeyword ] = useState('')\n  const [ noticeMessage, setNoticeMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n\n  useEffect(() => {\n    /*\n    const doesntExist = {\n      id: -1,\n      name: \"doesn't exist\",\n      number: \"\"\n    }\n    */\n\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n        // setPersons(response.concat(doesntExist))\n      })\n  }, [])\n\n  const addPerson = (e) => {\n    e.preventDefault()\n    const personIndex = persons.map(a => a.name).indexOf(newName)\n\n    if  (\n          personIndex !== -1 && \n          window.confirm(`${newName} is already added. Update number?`)\n        ) {\n      personService\n        .update(persons[personIndex].id, newNumber)\n        .then(response => {\n          const newPersons = (persons\n              .filter(a => a.id !== response.id)\n              .concat(response))\n          setPersons(newPersons)\n          setNoticeMessage(`Updated ${newName}`)\n          setTimeout(() => {setNoticeMessage(null)}, 3000)\n        })\n    }\n\n    else {\n      const newPerson = { name: newName, number: newNumber }\n      personService\n        .create(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response))\n          setNoticeMessage(`Added ${newName}`)\n          setTimeout(() => {setNoticeMessage(null)}, 3000)\n        })\n    }\n\n    setNewName('')\n    setNewNumber('')\n  }\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Really delete ${person.name}?`)) {\n      personService\n        .remove(person.id)\n        .then(response => {\n          if (response === 1) {\n            setPersons(persons.filter(a => a.id !== person.id))\n            setErrorMessage(`${person.name} has already been removed from server`)\n            setTimeout(() => {setErrorMessage(null)}, 3000)\n          }\n          else {\n            setPersons(persons.filter(a => a.id !== response.id))\n            setNoticeMessage(`Removed ${person.name}`)\n            setTimeout(() => {setNoticeMessage(null)}, 3000)\n          }\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <FilterForm\n        keyword={keyword}\n        keywordSetter={setKeyword}\n      />\n\n      <Notice message={noticeMessage} />\n      <Error message={errorMessage} />\n\n      <h2>Add new</h2>\n      <NewPersonForm\n        newName={newName}\n        newNameSetter={setNewName}\n        newNumber={newNumber}\n        newNumberSetter={setNewNumber}\n        addPerson={addPerson}\n      />\n\n      <h2>Numbers</h2>\n      <FilteredPersons\n        list={persons}\n        keyword={keyword}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}