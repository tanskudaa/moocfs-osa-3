(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),c=t.n(u),o=t(2),l=t(4),i=t(3),m=t.n(i),d="/api/persons",f=function(){return m.a.get(d).then((function(e){return e.data}))},s=f,b=function(e){return m.a.post(d,e).then((function(e){return e.data}))},v=function(e){var n=m.a.get("".concat(d,"/").concat(e)).then((function(e){return e.data})).catch((function(){return 1}));return n.then((function(n){1!==n&&m.a.delete("".concat(d,"/").concat(e))})),n},p=function(e,n){return f().then((function(t){var a=t.find((function(n){return n.id===e})),r=Object(l.a)(Object(l.a)({},a),{},{number:n});return m.a.put("".concat(d,"/").concat(e),r),r}))},E=function(e){var n=e.message;return""!==n&&null!==n&&"undefined"!==typeof n?r.a.createElement("div",{className:"notice"},n):null},w=function(e){var n=e.message;return""!==n&&null!==n&&"undefined"!==typeof n?r.a.createElement("div",{className:"error"},n):null},h=function(e){var n=e.keyword,t=e.keywordSetter;return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}})))},O=function(e){var n=e.newName,t=e.newNameSetter,a=e.newNumber,u=e.newNumberSetter,c=e.addPerson;return r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:a,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.list,t=e.keyword,a=e.deletePerson;return n.filter((function(e){return e.name.includes(t)})).sort((function(e,n){return e.name.toLowerCase()>n.name.toLowerCase()?1:-1})).map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e)}},"delete"))}))},j=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],m=l[1],d=Object(a.useState)(""),f=Object(o.a)(d,2),j=f[0],y=f[1],S=Object(a.useState)(""),k=Object(o.a)(S,2),N=k[0],C=k[1],P=Object(a.useState)(null),T=Object(o.a)(P,2),x=T[0],A=T[1],J=Object(a.useState)(null),L=Object(o.a)(J,2),R=L[0],U=L[1];Object(a.useEffect)((function(){var e={id:-1,name:"doesn't exist",number:""};s().then((function(n){u(n.concat(e))}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(h,{keyword:N,keywordSetter:C}),r.a.createElement(E,{message:x}),r.a.createElement(w,{message:R}),r.a.createElement("h2",null,"Add new"),r.a.createElement(O,{newName:i,newNameSetter:m,newNumber:j,newNumberSetter:y,addPerson:function(e){e.preventDefault();var n=t.map((function(e){return e.name})).indexOf(i),a=null;if(-1!==n&&(a=window.confirm("".concat(i," is already added. Update number?"))),!0===a)p(t[n].id,j).then((function(e){var n=t.filter((function(n){return n.id!==e.id})).concat(e);u(n),A("Updated ".concat(i)),setTimeout((function(){A(null)}),3e3)}));else if(null===a){b({name:i,number:j}).then((function(e){u(t.concat(e)),A("Added ".concat(i)),setTimeout((function(){A(null)}),3e3)})).catch((function(e){console.log(e),console.log(e.response),U(e.response.data),setTimeout((function(){U(null)}),3e3)}))}m(""),y("")}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{list:t,keyword:N,deletePerson:function(e){window.confirm("Really delete ".concat(e.name,"?"))&&v(e.id).then((function(n){1===n?(u(t.filter((function(n){return n.id!==e.id}))),U("".concat(e.name," has already been removed from server")),setTimeout((function(){U(null)}),3e3)):(u(t.filter((function(e){return e.id!==n.id}))),A("Removed ".concat(e.name)),setTimeout((function(){A(null)}),3e3))}))}}))};t(37);c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.44156d0a.chunk.js.map